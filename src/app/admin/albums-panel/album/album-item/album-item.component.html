<div class="album-item">
  <h3 class="center pointer" (click)="open()">{{ albumItem.name }}</h3>
  <button (click)="onDeleteAlbumItem()" class="delete button">delete albumItem</button>
</div>

<div *ngIf="isOpen" class="album-item-content">
  <ng-container *ngFor="let albumItemPhoto of  albumItem.albumPhotos"> <!--
    [
    {
      photoId: 0,
      name: 'test',
      photoName: 'File[]',
      albumItemId: 12,
      createDate: 'string',
      updateDate: 'string'
    },
    {
      photoId: 1,
      name: 'test',
      photoName: 'File[]',
      albumItemId: 12,
      createDate: 'string',
      updateDate: 'string'
    }
  ]
   -->
    <app-album-photo
      [albumPhoto]="albumItemPhoto"
      (deleteAlbumPhotoClicked)="onDeleteAlbumPhoto($event)"
    ></app-album-photo>
  </ng-container>

  <div class="plus" *ngIf="!formMode">
    <div class="plus-btn">
      <h3>Add Album Photo</h3>
      <app-plus
        (click)="onGetForm()"
      ></app-plus>
    </div>
  </div>

  <form
    *ngIf="formMode"
    class="form"
    [formGroup]="form"
    (ngSubmit)="onAddAlbumPhoto()"
  >
    <div class="form-control">
      <label for="Name" class="form-label">Photo name</label>
      <input
        type="text"
        name="Name"
        class="input"
        placeholder="Photo name"
        formControlName="Name"
      >
      <p class="required" *ngIf="get('Name').invalid && get('Name').touched">
        <ng-container *ngFor="let errorMessage of errors('Name')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </p>
    </div>

    <div class="form-control">
      <label for="image" class="form-label">Photo</label>
      <img class="panel-img" [src]="selectedFile?.src" *ngIf="selectedFile?.src !== null && selectedFile?.src">
      <input
        #imageInput
        type="file"
        class="input"
        name="files"
        formControlName="files"
        placeholder="Album item photo"
        (change)="processFile(imageInput)"
      >
      <p class="required" *ngIf="get('files').invalid && get('files').touched">
        <ng-container *ngFor="let errorMessage of errors('files')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </p>
    </div>

    <!-- disabled input -->
    <div class="form-control visible">
      <label for="AlbumItemId" class="form-label">Album item id</label>
      <input
        type="text"
        name="AlbumItemId"
        class="input"
        placeholder="Album item id"
        formControlName="AlbumItemId"
      >
      <p class="required" *ngIf="get('AlbumItemId').invalid && get('AlbumItemId').touched">
        <ng-container *ngFor="let errorMessage of errors('AlbumItemId')">
          <span *ngIf="errorMessage !== true">{{ errorMessage }}</span>
        </ng-container>
      </p>
    </div>

    <button
      type="submit"
      class="button update"
    >Add Photo</button>

    <div *ngIf="formMode">
      <div class="form">
        <button
          (click)="formMode = false"
          class="button delete"
        >Work end</button>
      </div>
    </div>

  </form>
</div>
